SELECT SQL_CALC_FOUND_ROWS bs.desc_,
       bs.photo_preview,
       bs.photo_preview as photo,
       bs.id_firms,
       bs.id_firms,
       bs.id,
       bs.title,
       if (bs.datein > now() + interval 0 hour, DATE_FORMAT(now() + interval 0
        hour, "%d.%m.%y"), DATE_FORMAT(bs.datein, "%d.%m.%y")) as datein
FROM basenews bs
WHERE 1 and
      bs.bshow = 1 and
      bs.news_article = 1 and
      bs.id_firms = "0" AND
      `bs`.`title` LIKE '%представитель%' and
      bs.datein <=(now() + interval 0 hour) and
      bs.saled = 0 and
      bs.id in (SELECT bsnet.id_basenews FROM basenewsessence bsnet WHERE
       bsnet.id_s_news_essence = "3")
ORDER BY bs.datein DESC
LIMIT 0, 10
